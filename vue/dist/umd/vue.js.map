{"version":3,"file":"vue.js","sources":["../../src/util/index.js","../../src/observer/index.js","../../src/state.js","../../src/init.js","../../src/index.js"],"sourcesContent":["// 实现一个代理效果\nexport function proxy (vm, source, key) {\n    Object.defineProperty(vm, key, {\n        get () {\n            return vm[source][key];\n        },\n        set (newVal) {\n            vm[source][key] = newVal;\n        }\n    })\n}\nexport function isObjext (data) {\n    return typeof data === 'object' && data !== null;\n}\n","import { isObjext } from '../util/index.js';\nclass Observer {\n    constructor(value) {\n        console.log(value);\n        // 对对象进行观测\n        this.walk(value);\n    }\n    walk (data) {\n        let keys = Object.keys(data);\n        keys.forEach(key => {\n            defineReactive(data, key, data[key]);\n        })\n    }\n}\nfunction defineReactive (data, key, value) {\n    Object.defineProperty(data, key, {\n        get () {\n            return value;\n        },\n        set (newVal) {\n            if (newVal === value) {\n                return;\n            } else {\n                observe(newVal); // 新赋的值也可以是一个对象\n                value = newVal;\n            }\n        }\n    });\n}\nexport function observe (data) {\n    if (!isObjext(data)) {\n        return;\n    }\n    return new Observer(data);\n}\n","import { proxy } from './util/index.js';\nimport { observe } from './observer/index.js';\n\nexport function initState (vm) {\n    const opts = vm.$options;\n    // vue的数据来源 属性 方法 数据 计算属性 watch\n    if (opts.props) {\n        initProps(vm);\n    }\n    if (opts.methods) {\n        initMethod(vm);\n    }\n    if (opts.data) {\n        initData(vm);\n    }\n    if (opts.computed) {\n        initComputed(vm);\n    }\n    if (opts.watch) {\n        initWatch(vm);\n    }\n}\nfunction initProps (vm) { };\nfunction initMethod (vm) { };\nfunction initData (vm) {\n    // 数据初始化\n    let data = vm.$options.data;\n    data = typeof data === 'function' ? data.call(vm) : data; // call(vm)保证data方法的this指向vm\n    vm['_data'] = data;\n    // 做一个数据代理 vm.data.xxx === vm.xxx\n    for (let key in data) {\n        proxy(vm, '_data', key);\n    }\n    observe(data); // 响应式原理\n};\nfunction initComputed (vm) { };\nfunction initWatch (vm) { };\n","import { initState } from \"./state\";\n\nexport function initMixin (Vue) {\n    Vue.prototype._init = function (options) {\n\n        const vm = this;\n        vm.$options = options;\n\n        // 初始化状态\n        initState(vm);\n    }\n}\n","import {initMixin} from './init.js';\nfunction Vue (options) {\n    this._init(options);\n}\ninitMixin(Vue); // 给Vue原型上添加一个_init方法\nexport default Vue;\n"],"names":["proxy","vm","source","key","Object","defineProperty","get","set","newVal","isObjext","data","Observer","value","console","log","walk","keys","forEach","defineReactive","observe","initState","opts","$options","props","methods","initData","computed","watch","call","initMixin","Vue","prototype","_init","options"],"mappings":"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"}